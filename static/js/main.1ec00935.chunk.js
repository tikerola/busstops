(this.webpackJsonpkoodihaaste=this.webpackJsonpkoodihaaste||[]).push([[0],{53:function(t,e,n){t.exports=n(63)},58:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(8),r=n.n(o),s=(n(58),n(18)),l=n(38),c=n.n(l),u=n(43),p=n(28),d=n(14),h=n(19),m=n(48),v=n(49),f={A:{point:[99,199]},B:{point:[208,174]},C:{point:[25,232]},D:{point:[154,231]},E:{point:[69,297]},F:{point:[116,324]},G:{point:[176,345]},H:{point:[169,423]},I:{point:[114,361]},J:{point:[57,329]},K:{point:[477,238]},L:{point:[477,185]},M:{point:[444,151]},N:{point:[414,84]},O:{point:[352,20]},P:{point:[256,59]},Q:{point:[344,72]},R:{point:[379,159]}},g={AC:{start:[125,291],end:[49,325]},CD:{start:[50,332],end:[203,333]},CE:{start:[42,345],end:[87,410]},DB:{start:[229,320],end:[286,261]},BA:{start:[279,253],end:[156,281]},DE:{start:[207,340],end:[110,413]},EF:{start:[112,433],end:[151,455]},FG:{start:[181,468],end:[234,488]},GH:{start:[248,508],end:[243,588]},HI:{start:[230,592],end:[171,526]},IJ:{start:[147,507],end:[95,478]},DR:{start:[234,327],end:[525,232]},RN:{start:[547,210],end:[582,135]},RQ:{start:[535,212],end:[496,118]},NO:{start:[578,110],end:[511,41]},OQ:{start:[498,42],end:[491,87]},OP:{start:[485,36],end:[379,79]},PQ:{start:[379,87],end:[473,100]},QN:{start:[504,106],end:[573,118]},EM:{start:[112,418],end:[616,223]},GK:{start:[264,488],end:[665,347]},KL:{start:[681,324],end:[681,280]},LM:{start:[668,253],end:[642,227]},MN:{start:[625,202],end:[597,135]},CA:{end:[125,291],start:[49,325]},DC:{end:[50,332],start:[203,333]},EC:{end:[42,345],start:[87,410]},BD:{end:[229,320],start:[286,261]},AB:{end:[279,253],start:[156,281]},ED:{end:[207,340],start:[110,413]},FE:{end:[112,433],start:[151,455]},GF:{end:[181,468],start:[234,488]},HG:{end:[248,508],start:[243,588]},IH:{end:[230,592],start:[171,526]},JI:{end:[147,507],start:[95,478]},RD:{end:[234,327],start:[525,232]},NR:{end:[547,210],start:[582,135]},QR:{end:[535,212],start:[496,118]},ON:{end:[578,110],start:[511,41]},QO:{end:[498,42],start:[491,87]},PO:{end:[485,36],start:[379,79]},QP:{end:[379,87],start:[473,100]},NQ:{end:[504,106],start:[573,118]},ME:{end:[112,418],start:[616,223]},KG:{end:[264,488],start:[665,347]},LK:{end:[681,324],start:[681,280]},ML:{end:[668,253],start:[642,227]},NM:{end:[625,202],start:[597,135]}};for(var y in g)g[y].start[0]*=.7,g[y].start[1]*=.7,g[y].end[0]*=.7,g[y].end[1]*=.7;var k=g,b=function(t,e){return t>=f.A.point[0]-10&&t<=f.A.point[0]+10&&e>=f.A.point[1]-10&&e<=f.A.point[1]+10?"A":t>=f.B.point[0]-10&&t<=f.B.point[0]+10&&e>=f.B.point[1]-10&&e<=f.B.point[1]+10?"B":t>=f.C.point[0]-10&&t<=f.C.point[0]+10&&e>=f.C.point[1]-10&&e<=f.C.point[1]+10?"C":t>=f.D.point[0]-10&&t<=f.D.point[0]+10&&e>=f.D.point[1]-10&&e<=f.D.point[1]+10?"D":t>=f.E.point[0]-10&&t<=f.E.point[0]+10&&e>=f.E.point[1]-10&&e<=f.E.point[1]+10?"E":t>=f.F.point[0]-10&&t<=f.F.point[0]+10&&e>=f.F.point[1]-10&&e<=f.F.point[1]+10?"F":t>=f.G.point[0]-10&&t<=f.G.point[0]+10&&e>=f.G.point[1]-10&&e<=f.G.point[1]+10?"G":t>=f.H.point[0]-10&&t<=f.H.point[0]+10&&e>=f.H.point[1]-10&&e<=f.H.point[1]+10?"H":t>=f.I.point[0]-10&&t<=f.I.point[0]+10&&e>=f.I.point[1]-10&&e<=f.I.point[1]+10?"I":t>=f.J.point[0]-10&&t<=f.J.point[0]+10&&e>=f.J.point[1]-10&&e<=f.J.point[1]+10?"J":t>=f.K.point[0]-10&&t<=f.K.point[0]+10&&e>=f.K.point[1]-10&&e<=f.K.point[1]+10?"K":t>=f.L.point[0]-10&&t<=f.L.point[0]+10&&e>=f.L.point[1]-10&&e<=f.L.point[1]+10?"L":t>=f.M.point[0]-10&&t<=f.M.point[0]+10&&e>=f.M.point[1]-10&&e<=f.M.point[1]+10?"M":t>=f.N.point[0]-10&&t<=f.N.point[0]+10&&e>=f.N.point[1]-10&&e<=f.N.point[1]+10?"N":t>=f.O.point[0]-10&&t<=f.O.point[0]+10&&e>=f.O.point[1]-10&&e<=f.O.point[1]+10?"O":t>=f.P.point[0]-10&&t<=f.P.point[0]+10&&e>=f.P.point[1]-10&&e<=f.P.point[1]+10?"P":t>=f.Q.point[0]-10&&t<=f.Q.point[0]+10&&e>=f.Q.point[1]-10&&e<=f.Q.point[1]+10?"Q":t>=f.R.point[0]-10&&t<=f.R.point[0]+10&&e>=f.R.point[1]-10&&e<=f.R.point[1]+10?"R":void 0},E={canvas:{overflow:"hidden",borderRadius:"4px",height:"445px",cursor:"pointer"}},x=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).canvasRef=i.a.createRef(),t.backgroundImageRef=i.a.createRef(),t.busRef=i.a.createRef(),t.animateBus=function(e){var n=t.props.path;return new Promise((function(a,i){for(var o=function(i){setTimeout((function(){t.drawAnimatedLine(e,n[i].vertex,n[i+1].vertex,n[i].color),i===n.length-2&&a("success")}),500*(i+1))},r=0;r<n.length-1;r++)o(r)}))},t.drawAnimatedLine=function(e,n,a,i){e.beginPath(),e.lineWidth=4,e.strokeStyle=i;for(var o="".concat(n).concat(a),r=500,s=(k[o].end[0]-k[o].start[0])/r,l=(k[o].end[1]-k[o].start[1])/r,c=k[o].start[0],u=k[o].start[1];r--;)setTimeout((function(){e.drawImage(t.backgroundImageRef.current,0,0),e.moveTo(c,u),e.lineTo(c+s,u+l),e.stroke(),e.drawImage(t.busRef.current,c+-20,u+-55),c+=s,u+=l}),2)},t.handleMouseDown=function(e){var n=e.clientX-t.canvasRef.current.getBoundingClientRect().left,a=e.clientY-t.canvasRef.current.getBoundingClientRect().top,i=b(n,a);i&&(t.props.busStop.start?t.props.busStop.stop||t.props.setBusStop((function(t){return Object(p.a)({},t,{stop:i})})):t.props.setBusStop({start:i,stop:""}))},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this.canvasRef.current.getContext("2d"),e=new Image;this.backgroundImageRef.current=e,e.src="./assets/images/kokeilu.png";var n=new Image;this.busRef.current=n,n.src="./assets/images/bus1.png",e.onload=function(){t.drawImage(e,0,0)}}},{key:"componentDidUpdate",value:function(t,e){var n=this;this.props.path!==t.path&&this.props.busStop.start&&this.props.busStop.stop&&(this.animate(),this.props.setDrawBusses(!1),setTimeout((function(){n.props.setBusStop({start:"",stop:""})}),2e3))}},{key:"animate",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,n,a,i=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.path,n=this.canvasRef.current,(a=n.getContext("2d")).drawImage(this.backgroundImageRef.current,0,0),this.drawStartAndEndCircles(a,e[0].vertex,e[e.length-1].vertex),t.next=7,this.animateBus(a);case 7:setTimeout((function(){for(var t=0;t<e.length-2;t++)i.drawLine(a,e[t].vertex,e[t+1].vertex,e[t].color);var n="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),o="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),r=k[n].end[0],s=k[o].end[1];a.drawImage(i.busRef.current,r+-20,s+-55),i.props.setDrawBusses(!0)}),500);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"drawLine",value:function(t,e,n,a){t.beginPath(),t.lineWidth=4,t.strokeStyle=a;var i="".concat(e).concat(n);t.moveTo(k[i].start[0],k[i].start[1]),t.lineTo(k[i].end[0],k[i].end[1]),t.stroke()}},{key:"drawStartAndEndCircles",value:function(t,e,n){var a=e,i=n,o=Object(s.a)(f[a].point,2),r=o[0],l=o[1],c=Object(s.a)(f[i].point,2),u=c[0],p=c[1];t.beginPath(),t.lineWidth=4,t.strokeStyle="red",t.arc(r,l,11,0,2*Math.PI),t.stroke(),t.beginPath(),t.arc(u,p,11,0,2*Math.PI),t.stroke()}},{key:"render",value:function(){return i.a.createElement("div",{style:E.canvas},i.a.createElement("canvas",{ref:this.canvasRef,width:500,height:450,onMouseDown:this.handleMouseDown}))}}]),n}(i.a.Component),w=i.a.memo(x),R=n(29),j=n(88),O=n(98),C=n(99),I=n(95),D=n(93),M=n(96),B=n(9),L=n(97),S={container:{display:"flex",flexDirection:"column",alignItems:"center",background:"#38423d",padding:"20px",height:"405px",width:"220px",marginRight:"50px",color:"#999"},selectContainer:{display:"flex",flexDirection:"row",alignItems:"flex-end"},select:{width:"170px"},busIcon:{marginRight:"5px",paddingBottom:"4px"},resultContainer:{marginTop:"30px",background:"#5c3835",padding:"10px",width:"90%",height:"65%",color:"#999"},resultTitle:{textAlign:"center",fontSize:"1.0em",textDecoration:"underline",marginBottom:"10px"},resultRoute:{marginBottom:"15px",textAlign:"center"},resultRouteList:{display:"flex",flexDirection:"row",justifyContent:"space-around"},resultVertex:{width:"100px"}},P=Object(M.a)((function(t){var e=t.drawBusses,n=t.path,o=t.distance,r=t.busStop,s=t.setBusStop,l=i.a.useRef(),c=i.a.useRef();Object(a.useEffect)((function(){r.start||r.stop||(l.current.blur(),c.current.blur())}),[r.start,r.stop]);var u=function(t){var e=t.target.name;s((function(n){return Object(p.a)({},n,Object(R.a)({},e,t.target.value))}))};return i.a.createElement(j.a,{style:S.container,elevation:8},i.a.createElement("div",{style:S.selectContainer},i.a.createElement(L.a,{style:S.busIcon}),i.a.createElement(O.a,null,i.a.createElement(C.a,{htmlFor:"l\xe4ht\xf6pys\xe4kki"},"L\xe4ht\xf6pys\xe4kki"),i.a.createElement(I.a,{native:!0,inputRef:c,value:r.start,onChange:u,style:S.select,inputProps:{name:"start",id:"l\xe4ht\xf6pys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),B.pysakit.map((function(t){return i.a.createElement("option",{key:t+"1",value:t},t)}))))),i.a.createElement("div",{style:S.selectContainer},i.a.createElement(L.a,{style:S.busIcon}),i.a.createElement(O.a,null,i.a.createElement(C.a,{htmlFor:"p\xe4\xe4tepys\xe4kki"},"P\xe4\xe4tepys\xe4kki"),i.a.createElement(I.a,{native:!0,value:r.stop,inputRef:l,onChange:u,style:S.select,inputProps:{name:"stop",id:"p\xe4\xe4tepys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),B.pysakit.map((function(t){return i.a.createElement("option",{key:t+"2",value:t},t)}))))),i.a.createElement(j.a,{elevation:4,style:S.resultContainer},i.a.createElement(D.a,{style:S.resultTitle},"Tulokset:"),o>0&&o!==1/0&&i.a.createElement("div",null,i.a.createElement(D.a,{style:S.resultRoute},"Reitti: ",n[0].vertex," - ",n[n.length-1].vertex,", Lyhin matka: ",o),n.map((function(t,a){return i.a.createElement("div",{key:a},t.color&&e&&i.a.createElement("div",{style:S.resultRouteList},i.a.createElement("span",{style:S.resultVertex},t.vertex," - ",n[a+1].vertex),i.a.createElement("img",{src:"./assets/images/busicon".concat(t.color,".png"),height:"15",alt:"busicon"})))}))),0===o&&i.a.createElement(D.a,{style:S.resultRoute},"T\xe4h\xe4n et tarvitse bussia!"),o===1/0&&i.a.createElement(D.a,{style:{color:"red"}},"Linjat eiv\xe4t valitettavasti vie sinua perille")))})),N=n(94),A=n(47),Q=Object(A.a)({overrides:{MuiInputBase:{input:{color:"#999"}},MuiInput:{underline:{"&.MuiInput-underline:before":{},"&.MuiInput-underline:after":{border:"none"},"&.MuiInput-underline:focus":{border:"none"}}},MuiInputLabel:{root:{"&.Mui-focused":{color:"#999"},color:"#999"}},MuiOutlinedInput:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#999"},"&:hover fieldset":{borderColor:"#999"},"&.Mui-focused fieldset":{borderColor:"#999"}}}},MuiSelect:{select:{"&.MuiSelect-select:not([multiple]) option":{background:"#663826",color:"#ffffff"}}}},palette:{primary:{main:"#999"},text:{secondary:"#999"},contrastThreshold:3,tonalOffset:.2},typography:{htmlFontSize:20}}),F=n(25),G=function t(e,n){Object(d.a)(this,t),this.val=e,this.priority=n},K=function(){function t(){Object(d.a)(this,t),this.values=[]}return Object(h.a)(t,[{key:"enqueue",value:function(t,e){var n,a=new G(t,e);this.values.push(a);for(var i,o=this.values.length-1;o>0&&(n=Math.floor((o-1)/2),!(this.values[n].priority<this.values[o].priority));)i=this.values[n],this.values[n]=this.values[o],this.values[o]=i,o=n}},{key:"dequeue",value:function(){var t=this.values[0],e=this.values.pop();this.values.length&&(this.values[0]=e);for(var n=0,a=2*n+1,i=2*n+2;a<this.values.length;){if(i>=this.values.length){if(!(this.values[n].priority>this.values[a].priority))break;this.switch(n,a),n=a}else{var o=this.values[a].priority<this.values[i].priority?a:i;if(!(this.values[n].priority>this.values[o].priority))break;this.switch(n,o),n=o}a=2*n+1,i=2*n+2}return t}},{key:"switch",value:function(t,e){var n;n=this.values[t],this.values[t]=this.values[e],this.values[e]=n}},{key:"length",value:function(){return this.values.length}}]),t}(),T=function(){function t(){Object(d.a)(this,t),this.adjacensyList={},this.queue=new K}return Object(h.a)(t,[{key:"addVertex",value:function(t){this.adjacensyList[t]||(this.adjacensyList[t]=[])}},{key:"addEdge",value:function(t,e,n,a){this.adjacensyList[t].push({node:e,weight:n,color:a}),this.adjacensyList[e].push({node:t,weight:n,color:a})}},{key:"shortestPath",value:function(t,e){var n,a=this,i={},o={},r=[],s=[];for(var l in this.adjacensyList)o[l]=null,l===t?(i[l]=0,this.queue.enqueue(l,0)):(i[l]=1/0,this.queue.enqueue(l,1/0));for(;this.queue.length()>0;){if((n=this.queue.dequeue().val)===e){for(var c=e;c;)r.unshift(c),c=o[c];for(var u=void 0,p=void 0,d=0;d<r.length;d++)p=this.getEdgeColor(r[d],r[d+1],u),s.push({vertex:r[d],color:p}),u=p;return{pathWithColor:s,distance:i[e]}}this.adjacensyList[n].forEach((function(t){var e=i[n]+t.weight;e<i[t.node]&&(i[t.node]=e,o[t.node]=n,a.queue.enqueue(t.node,e))}))}return null}},{key:"getEdgeColor",value:function(t,e,n){var a,i=[],o=Object(F.a)(this.adjacensyList[t]);try{for(o.s();!(a=o.n()).done;){var r=a.value;r.node===e&&i.push(r.color)}}catch(s){o.e(s)}finally{o.f()}return i.includes(n)?n:i[0]}}]),t}(),H={container:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",background:"black"},headerAndSubheaderContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},headerContainer:{width:"55%",display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"20px"},header:{color:"#663826",fontSize:"2.5em",letterSpacing:"0.1em",fontFamily:"Bigelow Rules, cursive",marginBottom:0},content:{display:"flex",flexDirection:"row",justifyContent:"center",padding:"30px",width:"80vw",background:"radial-gradient(circle, rgba(69,69,71,1) 0%, rgba(3,5,13,1) 91%, rgba(0,0,0,1) 100%)"}};var J=function(){var t=i.a.useState({}),e=Object(s.a)(t,2),n=e[0],o=e[1],r=i.a.useState(!1),l=Object(s.a)(r,2),c=l[0],u=l[1],p=i.a.useState({start:"",stop:""}),d=Object(s.a)(p,2),h=d[0],m=d[1],v=Object(a.useRef)();return Object(a.useEffect)((function(){v.current=function(){var t,e,n,a,i,o=new T,r=Object(F.a)(B.pysakit);try{for(r.s();!(t=r.n()).done;){var s=t.value;o.addVertex(s)}}catch(f){r.e(f)}finally{r.f()}var l,c={},u=Object(F.a)(B.tiet);try{for(u.s();!(l=u.n()).done;){var p=l.value;c["".concat(p.mista).concat(p.mihin)]=p.kesto,c["".concat(p.mihin).concat(p.mista)]=p.kesto}}catch(f){u.e(f)}finally{u.f()}for(var d=0;d<B.linjastot.keltainen.length-1;d++)e=B.linjastot.keltainen,o.addEdge(e[d],e[d+1],c["".concat(e[d]).concat(e[d+1])],"yellow");for(var h=0;h<B.linjastot.punainen.length-1;h++)n=B.linjastot.punainen,o.addEdge(n[h],n[h+1],c["".concat(n[h]).concat(n[h+1])],"red");for(var m=0;m<B.linjastot.vihre\u00e4.length-1;m++)a=B.linjastot.vihre\u00e4,o.addEdge(a[m],a[m+1],c["".concat(a[m]).concat(a[m+1])],"green");for(var v=0;v<B.linjastot.sininen.length-1;v++)i=B.linjastot.sininen,o.addEdge(i[v],i[v+1],c["".concat(i[v]).concat(i[v+1])],"blue");return o}()}),[]),Object(a.useEffect)((function(){if(h.start&&h.stop){var t=v.current.shortestPath(h.start,h.stop);o(t)}}),[h.start,h.stop]),i.a.createElement(N.a,{theme:Q},i.a.createElement("div",{style:H.container},i.a.createElement("div",{style:H.headerAndSubheaderContainer},i.a.createElement("div",{style:H.headerContainer},i.a.createElement("img",{src:"./assets/images/poorman2.png",alt:"poorman",height:"80"}),i.a.createElement("h1",{style:H.header},"K\xf6yh\xe4n miehen reittiopas"),i.a.createElement("img",{src:"./assets/images/poorman.png",alt:"poorman",height:"80"})),i.a.createElement("div",{style:{color:"#777",fontSize:"0.8em",position:"relative",top:"-10px"}},"Valitse pys\xe4kit valikosta tai kartalta")),i.a.createElement(j.a,{elevation:4,style:H.content},i.a.createElement(P,{setBusStop:m,path:n.pathWithColor,drawBusses:c,distance:n.distance,busStop:h}),i.a.createElement(w,{path:n.pathWithColor,setDrawBusses:u,setData:o,setBusStop:m,busStop:h}))))};r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(J,null)),document.getElementById("root"))},9:function(t){t.exports=JSON.parse('{"pysakit":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R"],"tiet":[{"mista":"A","mihin":"B","kesto":3},{"mista":"B","mihin":"D","kesto":2},{"mista":"D","mihin":"A","kesto":1},{"mista":"A","mihin":"C","kesto":1},{"mista":"C","mihin":"D","kesto":5},{"mista":"C","mihin":"E","kesto":2},{"mista":"E","mihin":"D","kesto":3},{"mista":"E","mihin":"F","kesto":1},{"mista":"F","mihin":"G","kesto":1},{"mista":"G","mihin":"H","kesto":2},{"mista":"H","mihin":"I","kesto":2},{"mista":"I","mihin":"J","kesto":1},{"mista":"I","mihin":"G","kesto":1},{"mista":"G","mihin":"K","kesto":8},{"mista":"K","mihin":"L","kesto":1},{"mista":"L","mihin":"M","kesto":1},{"mista":"E","mihin":"M","kesto":10},{"mista":"M","mihin":"N","kesto":2},{"mista":"N","mihin":"O","kesto":2},{"mista":"O","mihin":"P","kesto":2},{"mista":"O","mihin":"Q","kesto":1},{"mista":"P","mihin":"Q","kesto":2},{"mista":"N","mihin":"Q","kesto":1},{"mista":"Q","mihin":"R","kesto":5},{"mista":"R","mihin":"N","kesto":3},{"mista":"D","mihin":"R","kesto":6}],"linjastot":{"keltainen":["E","F","G","K","L","M","N"],"punainen":["C","D","R","Q","N","O","P"],"vihre\xe4":["D","B","A","C","E","F","G","H","I","J"],"sininen":["D","E","M","N","O"]}}')}},[[53,1,2]]]);
//# sourceMappingURL=main.1ec00935.chunk.js.map