(this.webpackJsonpkoodihaaste=this.webpackJsonpkoodihaaste||[]).push([[0],{53:function(t,e,a){t.exports=a(66)},58:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){},65:function(t,e,a){},66:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(8),o=a.n(s),r=(a(58),a(18)),c=a(38),u=a.n(c),l=a(43),p=a(28),h=a(14),d=a(19),m=a(48),v=a(49),f={A:{point:[99,199]},B:{point:[208,174]},C:{point:[25,232]},D:{point:[154,231]},E:{point:[69,297]},F:{point:[116,324]},G:{point:[176,345]},H:{point:[169,423]},I:{point:[114,361]},J:{point:[57,329]},K:{point:[477,238]},L:{point:[477,185]},M:{point:[444,151]},N:{point:[414,84]},O:{point:[352,20]},P:{point:[256,59]},Q:{point:[344,72]},R:{point:[379,159]}},k={AC:{start:[125,291],end:[49,325]},CD:{start:[50,332],end:[203,333]},CE:{start:[42,345],end:[87,410]},DB:{start:[229,320],end:[286,261]},BA:{start:[279,253],end:[156,281]},DE:{start:[207,340],end:[110,413]},EF:{start:[112,433],end:[151,455]},FG:{start:[181,468],end:[234,488]},GH:{start:[248,508],end:[243,588]},HI:{start:[230,592],end:[171,526]},IJ:{start:[147,507],end:[95,478]},DR:{start:[234,327],end:[525,232]},RN:{start:[547,210],end:[582,135]},RQ:{start:[535,212],end:[496,118]},NO:{start:[578,110],end:[511,41]},OQ:{start:[498,42],end:[491,87]},OP:{start:[485,36],end:[379,79]},PQ:{start:[379,87],end:[473,100]},QN:{start:[504,106],end:[573,118]},EM:{start:[112,418],end:[616,223]},GK:{start:[264,488],end:[665,347]},KL:{start:[681,324],end:[681,280]},LM:{start:[668,253],end:[642,227]},MN:{start:[625,202],end:[597,135]},CA:{end:[125,291],start:[49,325]},DC:{end:[50,332],start:[203,333]},EC:{end:[42,345],start:[87,410]},BD:{end:[229,320],start:[286,261]},AB:{end:[279,253],start:[156,281]},ED:{end:[207,340],start:[110,413]},FE:{end:[112,433],start:[151,455]},GF:{end:[181,468],start:[234,488]},HG:{end:[248,508],start:[243,588]},IH:{end:[230,592],start:[171,526]},JI:{end:[147,507],start:[95,478]},RD:{end:[234,327],start:[525,232]},NR:{end:[547,210],start:[582,135]},QR:{end:[535,212],start:[496,118]},ON:{end:[578,110],start:[511,41]},QO:{end:[498,42],start:[491,87]},PO:{end:[485,36],start:[379,79]},QP:{end:[379,87],start:[473,100]},NQ:{end:[504,106],start:[573,118]},ME:{end:[112,418],start:[616,223]},KG:{end:[264,488],start:[665,347]},LK:{end:[681,324],start:[681,280]},ML:{end:[668,253],start:[642,227]},NM:{end:[625,202],start:[597,135]}};for(var g in k)k[g].start[0]*=.7,k[g].start[1]*=.7,k[g].end[0]*=.7,k[g].end[1]*=.7;var E=k,b=function(t,e){return t>=f.A.point[0]-10&&t<=f.A.point[0]+10&&e>=f.A.point[1]-10&&e<=f.A.point[1]+10?"A":t>=f.B.point[0]-10&&t<=f.B.point[0]+10&&e>=f.B.point[1]-10&&e<=f.B.point[1]+10?"B":t>=f.C.point[0]-10&&t<=f.C.point[0]+10&&e>=f.C.point[1]-10&&e<=f.C.point[1]+10?"C":t>=f.D.point[0]-10&&t<=f.D.point[0]+10&&e>=f.D.point[1]-10&&e<=f.D.point[1]+10?"D":t>=f.E.point[0]-10&&t<=f.E.point[0]+10&&e>=f.E.point[1]-10&&e<=f.E.point[1]+10?"E":t>=f.F.point[0]-10&&t<=f.F.point[0]+10&&e>=f.F.point[1]-10&&e<=f.F.point[1]+10?"F":t>=f.G.point[0]-10&&t<=f.G.point[0]+10&&e>=f.G.point[1]-10&&e<=f.G.point[1]+10?"G":t>=f.H.point[0]-10&&t<=f.H.point[0]+10&&e>=f.H.point[1]-10&&e<=f.H.point[1]+10?"H":t>=f.I.point[0]-10&&t<=f.I.point[0]+10&&e>=f.I.point[1]-10&&e<=f.I.point[1]+10?"I":t>=f.J.point[0]-10&&t<=f.J.point[0]+10&&e>=f.J.point[1]-10&&e<=f.J.point[1]+10?"J":t>=f.K.point[0]-10&&t<=f.K.point[0]+10&&e>=f.K.point[1]-10&&e<=f.K.point[1]+10?"K":t>=f.L.point[0]-10&&t<=f.L.point[0]+10&&e>=f.L.point[1]-10&&e<=f.L.point[1]+10?"L":t>=f.M.point[0]-10&&t<=f.M.point[0]+10&&e>=f.M.point[1]-10&&e<=f.M.point[1]+10?"M":t>=f.N.point[0]-10&&t<=f.N.point[0]+10&&e>=f.N.point[1]-10&&e<=f.N.point[1]+10?"N":t>=f.O.point[0]-10&&t<=f.O.point[0]+10&&e>=f.O.point[1]-10&&e<=f.O.point[1]+10?"O":t>=f.P.point[0]-10&&t<=f.P.point[0]+10&&e>=f.P.point[1]-10&&e<=f.P.point[1]+10?"P":t>=f.Q.point[0]-10&&t<=f.Q.point[0]+10&&e>=f.Q.point[1]-10&&e<=f.Q.point[1]+10?"Q":t>=f.R.point[0]-10&&t<=f.R.point[0]+10&&e>=f.R.point[1]-10&&e<=f.R.point[1]+10?"R":void 0},y=(a(60),function(t){Object(v.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).canvasRef=i.a.createRef(),t.backgroundImageRef=i.a.createRef(),t.busRef=i.a.createRef(),t.animateBus=function(e){var a=t.props.path;return new Promise((function(n,i){for(var s=function(i){setTimeout((function(){t.drawAnimatedLine(e,a[i].vertex,a[i+1].vertex,a[i].color),i===a.length-2&&n("success")}),500*(i+1))},o=0;o<a.length-1;o++)s(o)}))},t.drawAnimatedLine=function(e,a,n,i){e.beginPath(),e.lineWidth=4,e.strokeStyle=i;for(var s="".concat(a).concat(n),o=500,r=(E[s].end[0]-E[s].start[0])/o,c=(E[s].end[1]-E[s].start[1])/o,u=E[s].start[0],l=E[s].start[1];o--;)setTimeout((function(){e.drawImage(t.backgroundImageRef.current,0,0),e.moveTo(u,l),e.lineTo(u+r,l+c),e.stroke(),e.drawImage(t.busRef.current,u+-20,l+-55),u+=r,l+=c}),2)},t.handleMouseDown=function(e){var a=e.clientX-t.canvasRef.current.getBoundingClientRect().left,n=e.clientY-t.canvasRef.current.getBoundingClientRect().top,i=b(a,n);i&&(t.props.busStop.start?t.props.busStop.stop||t.props.setBusStop((function(t){return Object(p.a)({},t,{stop:i})})):t.props.setBusStop({start:i,stop:""}))},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this.canvasRef.current.getContext("2d"),e=new Image;this.backgroundImageRef.current=e,e.src="./assets/images/kokeilu.png";var a=new Image;this.busRef.current=a,a.src="./assets/images/bus1.png",e.onload=function(){t.drawImage(e,0,0)}}},{key:"componentDidUpdate",value:function(t,e){var a=this;this.props.path!==t.path&&this.props.busStop.start&&this.props.busStop.stop&&(this.animate(),this.props.setDrawBusses(!1),setTimeout((function(){a.props.setBusStop({start:"",stop:""})}),2e3))}},{key:"animate",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,a,n,i=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.path,a=this.canvasRef.current,(n=a.getContext("2d")).drawImage(this.backgroundImageRef.current,0,0),this.drawStartAndEndCircles(n,e[0].vertex,e[e.length-1].vertex),t.next=7,this.animateBus(n);case 7:setTimeout((function(){for(var t=0;t<e.length-2;t++)i.drawLine(n,e[t].vertex,e[t+1].vertex,e[t].color);var a="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),s="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),o=E[a].end[0],r=E[s].end[1];n.drawImage(i.busRef.current,o+-20,r+-55),i.props.setDrawBusses(!0)}),500);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"drawLine",value:function(t,e,a,n){t.beginPath(),t.lineWidth=4,t.strokeStyle=n;var i="".concat(e).concat(a);t.moveTo(E[i].start[0],E[i].start[1]),t.lineTo(E[i].end[0],E[i].end[1]),t.stroke()}},{key:"drawStartAndEndCircles",value:function(t,e,a){var n=e,i=a,s=Object(r.a)(f[n].point,2),o=s[0],c=s[1],u=Object(r.a)(f[i].point,2),l=u[0],p=u[1];t.beginPath(),t.lineWidth=4,t.strokeStyle="red",t.arc(o,c,11,0,2*Math.PI),t.stroke(),t.beginPath(),t.arc(l,p,11,0,2*Math.PI),t.stroke()}},{key:"render",value:function(){return i.a.createElement("div",{className:"canvas-container"},i.a.createElement("canvas",{id:"canvas",ref:this.canvasRef,width:500,height:450,onMouseDown:this.handleMouseDown}))}}]),a}(i.a.Component)),N=i.a.memo(y),O=a(29),R=a(91),j=a(101),C=a(102),I=a(98),M=a(96),w=a(99),L=a(9),D=a(100),B=(a(61),Object(w.a)((function(t){var e=t.drawBusses,a=t.path,s=t.distance,o=t.busStop,r=t.setBusStop,c=i.a.useRef(),u=i.a.useRef();Object(n.useEffect)((function(){o.start||o.stop||(c.current.blur(),u.current.blur())}),[o.start,o.stop]);var l=function(t){var e=t.target.name;r((function(a){return Object(p.a)({},a,Object(O.a)({},e,t.target.value))}))};return i.a.createElement(R.a,{className:"ui-container main-container",elevation:8},i.a.createElement("div",{className:"ui-selects"},i.a.createElement("div",{className:"ui-selectContainer"},i.a.createElement(D.a,{className:"ui-busIcon"}),i.a.createElement(j.a,null,i.a.createElement(C.a,{htmlFor:"l\xe4ht\xf6pys\xe4kki"},"L\xe4ht\xf6pys\xe4kki"),i.a.createElement(I.a,{native:!0,inputRef:u,value:o.start,onChange:l,className:"ui-selectInput",inputProps:{name:"start",id:"l\xe4ht\xf6pys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),L.pysakit.map((function(t){return i.a.createElement("option",{key:t+"1",value:t},t)}))))),i.a.createElement("div",{className:"ui-selectContainer"},i.a.createElement(D.a,{className:"ui-busIcon"}),i.a.createElement(j.a,null,i.a.createElement(C.a,{htmlFor:"p\xe4\xe4tepys\xe4kki"},"P\xe4\xe4tepys\xe4kki"),i.a.createElement(I.a,{native:!0,value:o.stop,inputRef:c,onChange:l,className:"ui-selectInput",inputProps:{name:"stop",id:"p\xe4\xe4tepys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),L.pysakit.map((function(t){return i.a.createElement("option",{key:t+"2",value:t},t)})))))),i.a.createElement(R.a,{elevation:4,className:"ui-resultContainer result-container"},i.a.createElement(M.a,{className:"ui-resultTitle"},"Tulokset:"),s>0&&s!==1/0&&i.a.createElement("div",null,i.a.createElement(M.a,{className:"ui-resultRoute"},"Reitti: ",a[0].vertex," - ",a[a.length-1].vertex,", Lyhyin matka: ",s),!e&&i.a.createElement("div",{className:"ui-loading"},"Ladataan..."),a.map((function(t,n){return i.a.createElement("div",{key:n,className:"ui-resultRouteListContainer"},t.color&&e&&i.a.createElement("div",{className:"ui-resultRouteList"},i.a.createElement("span",{className:"ui-resultVertex"},t.vertex," - ",a[n+1].vertex),i.a.createElement("img",{src:"./assets/images/busicon".concat(t.color,".png"),height:"15",alt:"busicon"})))}))),0===s&&i.a.createElement(M.a,{className:"ui-resultRoute"},"T\xe4h\xe4n et tarvitse bussia!"),s===1/0&&i.a.createElement(M.a,{style:{color:"red"}},"Linjat eiv\xe4t valitettavasti vie sinua perille")))}))),P=a(97),S=a(47),x=Object(S.a)({overrides:{MuiInputBase:{input:{color:"#999"}},MuiPaper:{root:{"&.main-container":{backgroundColor:"#38423d"},"&.result-container":{backgroundColor:"#5c3835"}}},MuiInput:{underline:{"&.MuiInput-underline:before":{},"&.MuiInput-underline:after":{border:"none"},"&.MuiInput-underline:focus":{border:"none"}}},MuiInputLabel:{root:{"&.Mui-focused":{color:"#999"},color:"#999"}},MuiOutlinedInput:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#999"},"&:hover fieldset":{borderColor:"#999"},"&.Mui-focused fieldset":{borderColor:"#999"}}}},MuiSelect:{select:{"&.MuiSelect-select:not([multiple]) option":{background:"#663826",color:"#ffffff"}}}},palette:{primary:{main:"#999"},text:{secondary:"#999"},contrastThreshold:3,tonalOffset:.2},typography:{htmlFontSize:20}}),A=a(25),Q=function t(e,a){Object(h.a)(this,t),this.val=e,this.priority=a},G=function(){function t(){Object(h.a)(this,t),this.values=[]}return Object(d.a)(t,[{key:"enqueue",value:function(t,e){var a,n=new Q(t,e);this.values.push(n);for(var i,s=this.values.length-1;s>0&&(a=Math.floor((s-1)/2),!(this.values[a].priority<this.values[s].priority));)i=this.values[a],this.values[a]=this.values[s],this.values[s]=i,s=a}},{key:"dequeue",value:function(){var t=this.values[0],e=this.values.pop();this.values.length&&(this.values[0]=e);for(var a=0,n=2*a+1,i=2*a+2;n<this.values.length;){if(i>=this.values.length){if(!(this.values[a].priority>this.values[n].priority))break;this.switch(a,n),a=n}else{var s=this.values[n].priority<this.values[i].priority?n:i;if(!(this.values[a].priority>this.values[s].priority))break;this.switch(a,s),a=s}n=2*a+1,i=2*a+2}return t}},{key:"switch",value:function(t,e){var a;a=this.values[t],this.values[t]=this.values[e],this.values[e]=a}},{key:"length",value:function(){return this.values.length}}]),t}(),F=function(){function t(){Object(h.a)(this,t),this.adjacensyList={},this.queue=new G}return Object(d.a)(t,[{key:"addVertex",value:function(t){this.adjacensyList[t]||(this.adjacensyList[t]=[])}},{key:"addEdge",value:function(t,e,a,n){this.adjacensyList[t].push({node:e,weight:a,color:n}),this.adjacensyList[e].push({node:t,weight:a,color:n})}},{key:"shortestPath",value:function(t,e){var a,n=this,i={},s={},o=[],r=[];for(var c in this.adjacensyList)s[c]=null,c===t?(i[c]=0,this.queue.enqueue(c,0)):(i[c]=1/0,this.queue.enqueue(c,1/0));for(;this.queue.length()>0;){if((a=this.queue.dequeue().val)===e){for(var u=e;u;)o.unshift(u),u=s[u];for(var l=void 0,p=void 0,h=0;h<o.length;h++)p=this.getEdgeColor(o[h],o[h+1],l),r.push({vertex:o[h],color:p}),l=p;return{pathWithColor:r,distance:i[e]}}this.adjacensyList[a].forEach((function(t){var e=i[a]+t.weight;e<i[t.node]&&(i[t.node]=e,s[t.node]=a,n.queue.enqueue(t.node,e))}))}return null}},{key:"getEdgeColor",value:function(t,e,a){var n,i=[],s=Object(A.a)(this.adjacensyList[t]);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.node===e&&i.push(o.color)}}catch(r){s.e(r)}finally{s.f()}return i.includes(a)?a:i[0]}}]),t}();a(65);var K=function(){var t=i.a.useState({}),e=Object(r.a)(t,2),a=e[0],s=e[1],o=i.a.useState(!1),c=Object(r.a)(o,2),u=c[0],l=c[1],p=i.a.useState({start:"",stop:""}),h=Object(r.a)(p,2),d=h[0],m=h[1],v=Object(n.useRef)();return Object(n.useEffect)((function(){v.current=function(){var t,e,a,n,i,s=new F,o=Object(A.a)(L.pysakit);try{for(o.s();!(t=o.n()).done;){var r=t.value;s.addVertex(r)}}catch(f){o.e(f)}finally{o.f()}var c,u={},l=Object(A.a)(L.tiet);try{for(l.s();!(c=l.n()).done;){var p=c.value;u["".concat(p.mista).concat(p.mihin)]=p.kesto,u["".concat(p.mihin).concat(p.mista)]=p.kesto}}catch(f){l.e(f)}finally{l.f()}for(var h=0;h<L.linjastot.keltainen.length-1;h++)e=L.linjastot.keltainen,s.addEdge(e[h],e[h+1],u["".concat(e[h]).concat(e[h+1])],"yellow");for(var d=0;d<L.linjastot.punainen.length-1;d++)a=L.linjastot.punainen,s.addEdge(a[d],a[d+1],u["".concat(a[d]).concat(a[d+1])],"red");for(var m=0;m<L.linjastot.vihre\u00e4.length-1;m++)n=L.linjastot.vihre\u00e4,s.addEdge(n[m],n[m+1],u["".concat(n[m]).concat(n[m+1])],"green");for(var v=0;v<L.linjastot.sininen.length-1;v++)i=L.linjastot.sininen,s.addEdge(i[v],i[v+1],u["".concat(i[v]).concat(i[v+1])],"blue");return s}()}),[]),Object(n.useEffect)((function(){if(d.start&&d.stop){var t=v.current.shortestPath(d.start,d.stop);s(t)}}),[d.start,d.stop]),i.a.createElement(P.a,{theme:x},i.a.createElement("div",{className:"app-container"},i.a.createElement("div",{className:"app-headerAndSubheaderContainer"},i.a.createElement("div",{className:"app-headerContainer"},i.a.createElement("img",{src:"./assets/images/poorman2.png",alt:"poorman",height:"80"}),i.a.createElement("h1",{className:"app-header"},"K\xf6yh\xe4n miehen reittiopas"),i.a.createElement("img",{src:"./assets/images/poorman.png",alt:"poorman",height:"80"})),i.a.createElement("div",{className:"app-subheader-lg"},"Valitse pys\xe4kit valikosta tai kartalta"),i.a.createElement("div",{className:"app-subheader-md"},"Valitse pys\xe4kit valikosta")),i.a.createElement(R.a,{elevation:4,className:"app-content"},i.a.createElement(B,{setBusStop:m,path:a.pathWithColor,drawBusses:u,distance:a.distance,busStop:d}),i.a.createElement("div",{className:"canvas"},i.a.createElement(N,{path:a.pathWithColor,setDrawBusses:l,setData:s,setBusStop:m,busStop:d})))))};o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(K,null)),document.getElementById("root"))},9:function(t){t.exports=JSON.parse('{"pysakit":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R"],"tiet":[{"mista":"A","mihin":"B","kesto":3},{"mista":"B","mihin":"D","kesto":2},{"mista":"D","mihin":"A","kesto":1},{"mista":"A","mihin":"C","kesto":1},{"mista":"C","mihin":"D","kesto":5},{"mista":"C","mihin":"E","kesto":2},{"mista":"E","mihin":"D","kesto":3},{"mista":"E","mihin":"F","kesto":1},{"mista":"F","mihin":"G","kesto":1},{"mista":"G","mihin":"H","kesto":2},{"mista":"H","mihin":"I","kesto":2},{"mista":"I","mihin":"J","kesto":1},{"mista":"I","mihin":"G","kesto":1},{"mista":"G","mihin":"K","kesto":8},{"mista":"K","mihin":"L","kesto":1},{"mista":"L","mihin":"M","kesto":1},{"mista":"E","mihin":"M","kesto":10},{"mista":"M","mihin":"N","kesto":2},{"mista":"N","mihin":"O","kesto":2},{"mista":"O","mihin":"P","kesto":2},{"mista":"O","mihin":"Q","kesto":1},{"mista":"P","mihin":"Q","kesto":2},{"mista":"N","mihin":"Q","kesto":1},{"mista":"Q","mihin":"R","kesto":5},{"mista":"R","mihin":"N","kesto":3},{"mista":"D","mihin":"R","kesto":6}],"linjastot":{"keltainen":["E","F","G","K","L","M","N"],"punainen":["C","D","R","Q","N","O","P"],"vihre\xe4":["D","B","A","C","E","F","G","H","I","J"],"sininen":["D","E","M","N","O"]}}')}},[[53,1,2]]]);
//# sourceMappingURL=main.47a65d82.chunk.js.map