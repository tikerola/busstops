(this.webpackJsonpkoodihaaste=this.webpackJsonpkoodihaaste||[]).push([[0],{53:function(t,e,n){t.exports=n(63)},58:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(8),s=n.n(o),r=(n(58),n(36)),l=n(38),c=n.n(l),u=n(43),p=n(27),d=n(14),h=n(18),m=n(48),f=n(49),v={point:[97,198]},g={point:[206,175]},y={point:[23,233]},k={point:[153,231]},b={point:[67,297]},E={point:[116,324]},x={point:[173,345]},w={point:[168,423]},j={point:[113,361]},O={point:[56,329]},R={point:[476,239]},D={point:[476,185]},I={point:[442,151]},C={point:[413,84]},B={point:[350,21]},M={point:[255,60]},S={point:[342,72]},L={point:[379,159]},N={AC:{start:[125,291],end:[49,325]},CD:{start:[50,332],end:[203,333]},CE:{start:[42,345],end:[87,410]},DB:{start:[229,320],end:[286,261]},BA:{start:[279,253],end:[156,281]},DE:{start:[207,340],end:[110,413]},EF:{start:[112,433],end:[151,455]},FG:{start:[181,468],end:[234,488]},GH:{start:[248,508],end:[243,588]},HI:{start:[230,592],end:[171,526]},IJ:{start:[147,507],end:[95,478]},DR:{start:[234,327],end:[525,232]},RN:{start:[547,210],end:[582,135]},RQ:{start:[535,212],end:[496,118]},NO:{start:[578,110],end:[511,41]},OQ:{start:[498,42],end:[491,87]},OP:{start:[485,36],end:[379,79]},PQ:{start:[379,87],end:[473,100]},QN:{start:[504,106],end:[573,118]},EM:{start:[112,418],end:[616,223]},GK:{start:[264,488],end:[665,347]},KL:{start:[681,324],end:[681,280]},LM:{start:[668,253],end:[642,227]},MN:{start:[625,202],end:[597,135]},CA:{end:[125,291],start:[49,325]},DC:{end:[50,332],start:[203,333]},EC:{end:[42,345],start:[87,410]},BD:{end:[229,320],start:[286,261]},AB:{end:[279,253],start:[156,281]},ED:{end:[207,340],start:[110,413]},FE:{end:[112,433],start:[151,455]},GF:{end:[181,468],start:[234,488]},HG:{end:[248,508],start:[243,588]},IH:{end:[230,592],start:[171,526]},JI:{end:[147,507],start:[95,478]},RD:{end:[234,327],start:[525,232]},NR:{end:[547,210],start:[582,135]},QR:{end:[535,212],start:[496,118]},ON:{end:[578,110],start:[511,41]},QO:{end:[498,42],start:[491,87]},PO:{end:[485,36],start:[379,79]},QP:{end:[379,87],start:[473,100]},NQ:{end:[504,106],start:[573,118]},ME:{end:[112,418],start:[616,223]},KG:{end:[264,488],start:[665,347]},LK:{end:[681,324],start:[681,280]},ML:{end:[668,253],start:[642,227]},NM:{end:[625,202],start:[597,135]}};for(var P in N)N[P].start[0]*=.7,N[P].start[1]*=.7,N[P].end[0]*=.7,N[P].end[1]*=.7;var A=N,Q=function(t,e){return t>=v.point[0]-10&&t<=v.point[0]+10&&e>=v.point[1]-10&&e<=v.point[1]+10?"A":t>=g.point[0]-10&&t<=g.point[0]+10&&e>=g.point[1]-10&&e<=g.point[1]+10?"B":t>=y.point[0]-10&&t<=y.point[0]+10&&e>=y.point[1]-10&&e<=y.point[1]+10?"C":t>=k.point[0]-10&&t<=k.point[0]+10&&e>=k.point[1]-10&&e<=k.point[1]+10?"D":t>=b.point[0]-10&&t<=b.point[0]+10&&e>=b.point[1]-10&&e<=b.point[1]+10?"E":t>=E.point[0]-10&&t<=E.point[0]+10&&e>=E.point[1]-10&&e<=E.point[1]+10?"F":t>=x.point[0]-10&&t<=x.point[0]+10&&e>=x.point[1]-10&&e<=x.point[1]+10?"G":t>=w.point[0]-10&&t<=w.point[0]+10&&e>=w.point[1]-10&&e<=w.point[1]+10?"H":t>=j.point[0]-10&&t<=j.point[0]+10&&e>=j.point[1]-10&&e<=j.point[1]+10?"I":t>=O.point[0]-10&&t<=O.point[0]+10&&e>=O.point[1]-10&&e<=O.point[1]+10?"J":t>=R.point[0]-10&&t<=R.point[0]+10&&e>=R.point[1]-10&&e<=R.point[1]+10?"K":t>=D.point[0]-10&&t<=D.point[0]+10&&e>=D.point[1]-10&&e<=D.point[1]+10?"L":t>=I.point[0]-10&&t<=I.point[0]+10&&e>=I.point[1]-10&&e<=I.point[1]+10?"M":t>=C.point[0]-10&&t<=C.point[0]+10&&e>=C.point[1]-10&&e<=C.point[1]+10?"N":t>=B.point[0]-10&&t<=B.point[0]+10&&e>=B.point[1]-10&&e<=B.point[1]+10?"O":t>=M.point[0]-10&&t<=M.point[0]+10&&e>=M.point[1]-10&&e<=M.point[1]+10?"P":t>=S.point[0]-10&&t<=S.point[0]+10&&e>=S.point[1]-10&&e<=S.point[1]+10?"Q":t>=L.point[0]-10&&t<=L.point[0]+10&&e>=L.point[1]-10&&e<=L.point[1]+10?"R":void 0},F=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).canvasRef=i.a.createRef(),t.backgroundImageRef=i.a.createRef(),t.busRef=i.a.createRef(),t.animateBus=function(e){var n=t.props.path;return new Promise((function(a,i){for(var o=function(i){setTimeout((function(){t.drawAnimatedLine(e,n[i].vertex,n[i+1].vertex,n[i].color),i===n.length-2&&a("success")}),500*(i+1))},s=0;s<n.length-1;s++)o(s)}))},t.drawAnimatedLine=function(e,n,a,i){e.beginPath(),e.lineWidth=4,e.strokeStyle=i;for(var o="".concat(n).concat(a),s=500,r=(A[o].end[0]-A[o].start[0])/s,l=(A[o].end[1]-A[o].start[1])/s,c=A[o].start[0],u=A[o].start[1];s--;)setTimeout((function(){e.drawImage(t.backgroundImageRef.current,0,0),e.moveTo(c,u),e.lineTo(c+r,u+l),e.stroke(),e.drawImage(t.busRef.current,c+-20,u+-55),c+=r,u+=l}),2)},t.handleMouseDown=function(e){var n=e.clientX-t.canvasRef.current.getBoundingClientRect().left,a=e.clientY-t.canvasRef.current.getBoundingClientRect().top,i=Q(n,a);i&&(t.props.busStop.start?t.props.busStop.stop||t.props.setBusStop((function(t){return Object(p.a)({},t,{stop:i})})):t.props.setBusStop({start:i,stop:""}))},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this.canvasRef.current.getContext("2d"),e=new Image;this.backgroundImageRef.current=e,e.src="./assets/images/kokeilu.png";var n=new Image;this.busRef.current=n,n.src="./assets/images/bus1.png",e.onload=function(){t.drawImage(e,0,0)}}},{key:"componentDidUpdate",value:function(t,e){var n=this;this.props.path!==t.path&&this.props.busStop.start&&this.props.busStop.stop&&(this.animate(),this.props.setDrawBusses(!1),setTimeout((function(){n.props.setBusStop({start:"",stop:""})}),2e3))}},{key:"animate",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,n,a,i=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.path,n=this.canvasRef.current,(a=n.getContext("2d")).drawImage(this.backgroundImageRef.current,0,0),t.next=6,this.animateBus(a);case 6:setTimeout((function(){for(var t=0;t<e.length-2;t++)i.drawLine(a,e[t].vertex,e[t+1].vertex,e[t].color);var n="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),o="".concat(e[e.length-2].vertex).concat(e[e.length-1].vertex),s=A[n].end[0],r=A[o].end[1];a.drawImage(i.busRef.current,s+-20,r+-55),i.props.setDrawBusses(!0)}),500);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"drawLine",value:function(t,e,n,a){t.beginPath(),t.lineWidth=4,t.strokeStyle=a;var i="".concat(e).concat(n);t.moveTo(A[i].start[0],A[i].start[1]),t.lineTo(A[i].end[0],A[i].end[1]),t.stroke()}},{key:"render",value:function(){return i.a.createElement("div",{style:{overflow:"hidden",borderRadius:"4px",height:"445px",cursor:"pointer"}},i.a.createElement("canvas",{ref:this.canvasRef,width:500,height:450,onMouseDown:this.handleMouseDown}))}}]),n}(i.a.Component),G=i.a.memo(F),T=n(28),q=n(88),K=n(98),H=n(99),J=n(95),W=n(93),z=n(96),V=n(9),U=n(97),X={display:"flex",flexDirection:"column",alignItems:"center",background:"#38423d",padding:"20px",height:"405px",width:"220px",marginRight:"50px",color:"#999"},Y=Object(z.a)((function(t){var e=t.drawBusses,n=t.path,o=t.distance,s=t.busStop,r=t.setBusStop,l=i.a.useRef(),c=i.a.useRef();Object(a.useEffect)((function(){s.start||s.stop||(l.current.blur(),c.current.blur())}),[s.start,s.stop]);var u=function(t){var e=t.target.name;r((function(n){return Object(p.a)({},n,Object(T.a)({},e,t.target.value))}))};return i.a.createElement(q.a,{style:X,elevation:8},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"}},i.a.createElement(U.a,{style:{marginRight:"5px",paddingBottom:"4px"}}),i.a.createElement(K.a,null,i.a.createElement(H.a,{htmlFor:"l\xe4ht\xf6pys\xe4kki"},"L\xe4ht\xf6pys\xe4kki"),i.a.createElement(J.a,{native:!0,inputRef:c,value:s.start,onChange:u,style:{width:"170px"},inputProps:{name:"start",id:"l\xe4ht\xf6pys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),V.pysakit.map((function(t){return i.a.createElement("option",{key:t+"1",value:t},t)}))))),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"}},i.a.createElement(U.a,{style:{marginRight:"5px",paddingBottom:"4px"}}),i.a.createElement(K.a,null,i.a.createElement(H.a,{htmlFor:"p\xe4\xe4tepys\xe4kki"},"P\xe4\xe4tepys\xe4kki"),i.a.createElement(J.a,{native:!0,value:s.stop,inputRef:l,onChange:u,style:{width:"170px"},inputProps:{name:"stop",id:"p\xe4\xe4tepys\xe4kki"}},i.a.createElement("option",{"aria-label":"None",value:""}),V.pysakit.map((function(t){return i.a.createElement("option",{key:t+"2",value:t},t)}))))),i.a.createElement(q.a,{elevation:4,style:{marginTop:"30px",background:"#5c3835",padding:"10px",width:"90%",height:"65%",color:"#999"}},i.a.createElement(W.a,{style:{textAlign:"center",fontSize:"1.0em",textDecoration:"underline",marginBottom:"10px"}},"Tulokset:"),o>0&&o!==1/0&&i.a.createElement("div",null,i.a.createElement(W.a,{style:{marginBottom:"15px",textAlign:"center"}},"Reitti: ",n[0].vertex," - ",n[n.length-1].vertex,", Lyhin matka: ",o),n.map((function(t,a){return i.a.createElement("div",{key:a},t.color&&e&&i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"}},i.a.createElement("span",{style:{width:"100px"}},t.vertex," - ",n[a+1].vertex),i.a.createElement("img",{src:"./assets/images/busicon".concat(t.color,".png"),height:"15",alt:"busicon"})))}))),0===o&&i.a.createElement(W.a,null,"T\xe4h\xe4n et tarvitse bussia!"),o===1/0&&i.a.createElement(W.a,{style:{color:"red"}},"Linjat eiv\xe4t valitettavasti vie sinua perille")))})),Z=n(94),$=n(47),_=Object($.a)({overrides:{MuiInputBase:{input:{color:"#999"}},MuiInput:{underline:{"&.MuiInput-underline:before":{},"&.MuiInput-underline:after":{border:"none"},"&.MuiInput-underline:focus":{border:"none"}}},MuiInputLabel:{root:{"&.Mui-focused":{color:"#999"},color:"#999"}},MuiOutlinedInput:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#999"},"&:hover fieldset":{borderColor:"#999"},"&.Mui-focused fieldset":{borderColor:"#999"}}}},MuiSelect:{select:{"&.MuiSelect-select:not([multiple]) option":{background:"#663826",color:"#ffffff"},"&.MuiSelect-select:option":{background:"#000"}}}},palette:{primary:{light:"#ffffff",main:"#999"},secondary:{light:"#ffffff",main:"#ffffff",contrastText:"#000"},text:{primary:"#000",secondary:"#999"},action:{active:"#999",hover:"#999",selected:"#999",focus:"#999"},success:{ligth:"#999",main:"#999",dark:"#999"},warning:{ligth:"#999",main:"#999",dark:"#999"},error:{ligth:"#999",main:"#999",dark:"#999"},contrastThreshold:3,tonalOffset:.2},typography:{htmlFontSize:20}}),tt=n(24),et=function t(e,n){Object(d.a)(this,t),this.val=e,this.priority=n},nt=function(){function t(){Object(d.a)(this,t),this.values=[]}return Object(h.a)(t,[{key:"enqueue",value:function(t,e){var n,a=new et(t,e);this.values.push(a);for(var i,o=this.values.length-1;o>0&&(n=Math.floor((o-1)/2),!(this.values[n].priority<this.values[o].priority));)i=this.values[n],this.values[n]=this.values[o],this.values[o]=i,o=n}},{key:"dequeue",value:function(){var t=this.values[0],e=this.values.pop();this.values.length&&(this.values[0]=e);for(var n=0,a=2*n+1,i=2*n+2;a<this.values.length;){if(i>=this.values.length){if(!(this.values[n].priority>this.values[a].priority))break;this.switch(n,a),n=a}else{var o=this.values[a].priority<this.values[i].priority?a:i;if(!(this.values[n].priority>this.values[o].priority))break;this.switch(n,o),n=o}a=2*n+1,i=2*n+2}return t}},{key:"switch",value:function(t,e){var n;n=this.values[t],this.values[t]=this.values[e],this.values[e]=n}},{key:"length",value:function(){return this.values.length}}]),t}(),at=function(){function t(){Object(d.a)(this,t),this.adjacensyList={},this.queue=new nt}return Object(h.a)(t,[{key:"addVertex",value:function(t){this.adjacensyList[t]||(this.adjacensyList[t]=[])}},{key:"addEdge",value:function(t,e,n,a){this.adjacensyList[t].push({node:e,weight:n,color:a}),this.adjacensyList[e].push({node:t,weight:n,color:a})}},{key:"shortestPath",value:function(t,e){var n,a=this,i={},o={},s=[],r=[];for(var l in this.adjacensyList)o[l]=null,l===t?(i[l]=0,this.queue.enqueue(l,0)):(i[l]=1/0,this.queue.enqueue(l,1/0));for(;this.queue.length()>0;){if((n=this.queue.dequeue().val)===e){for(var c=e;c;)s.unshift(c),c=o[c];for(var u=void 0,p=void 0,d=0;d<s.length;d++)p=this.getEdgeColor(s[d],s[d+1],u),r.push({vertex:s[d],color:p}),u=p;return{pathWithColor:r,distance:i[e]}}this.adjacensyList[n].forEach((function(t){var e=i[n]+t.weight;e<i[t.node]&&(i[t.node]=e,o[t.node]=n,a.queue.enqueue(t.node,e))}))}return null}},{key:"getEdgeColor",value:function(t,e,n){var a,i=[],o=Object(tt.a)(this.adjacensyList[t]);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.node===e&&i.push(s.color)}}catch(r){o.e(r)}finally{o.f()}return i.includes(n)?n:i[0]}}]),t}(),it={root:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",background:"black"},content:{display:"flex",flexDirection:"row",justifyContent:"center",padding:"30px",width:"80vw",background:"radial-gradient(circle, rgba(69,69,71,1) 0%, rgba(3,5,13,1) 91%, rgba(0,0,0,1) 100%)"},headerContainer:{width:"55%",display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"20px"},header:{color:"#663826",fontSize:"2.5em",letterSpacing:"0.1em",fontFamily:"Bigelow Rules, cursive",marginBottom:0}};var ot=function(){var t=i.a.useState({}),e=Object(r.a)(t,2),n=e[0],o=e[1],s=i.a.useState(!1),l=Object(r.a)(s,2),c=l[0],u=l[1],p=i.a.useState({start:"",stop:""}),d=Object(r.a)(p,2),h=d[0],m=d[1],f=Object(a.useRef)();return Object(a.useEffect)((function(){f.current=function(){var t,e,n,a,i,o=new at,s=Object(tt.a)(V.pysakit);try{for(s.s();!(t=s.n()).done;){var r=t.value;o.addVertex(r)}}catch(v){s.e(v)}finally{s.f()}var l,c={},u=Object(tt.a)(V.tiet);try{for(u.s();!(l=u.n()).done;){var p=l.value;c["".concat(p.mista).concat(p.mihin)]=p.kesto,c["".concat(p.mihin).concat(p.mista)]=p.kesto}}catch(v){u.e(v)}finally{u.f()}for(var d=0;d<V.linjastot.keltainen.length-1;d++)e=V.linjastot.keltainen,o.addEdge(e[d],e[d+1],c["".concat(e[d]).concat(e[d+1])],"yellow");for(var h=0;h<V.linjastot.punainen.length-1;h++)n=V.linjastot.punainen,o.addEdge(n[h],n[h+1],c["".concat(n[h]).concat(n[h+1])],"red");for(var m=0;m<V.linjastot.vihre\u00e4.length-1;m++)a=V.linjastot.vihre\u00e4,o.addEdge(a[m],a[m+1],c["".concat(a[m]).concat(a[m+1])],"green");for(var f=0;f<V.linjastot.sininen.length-1;f++)i=V.linjastot.sininen,o.addEdge(i[f],i[f+1],c["".concat(i[f]).concat(i[f+1])],"blue");return o}()}),[]),Object(a.useEffect)((function(){if(h.start&&h.stop){var t=f.current.shortestPath(h.start,h.stop);o(t)}}),[h.start,h.stop]),i.a.createElement(Z.a,{theme:_},i.a.createElement("div",{style:it.root},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}},i.a.createElement("div",{style:it.headerContainer},i.a.createElement("img",{src:"./assets/images/poorman2.png",alt:"poorman",height:"80"}),i.a.createElement("h1",{style:it.header},"K\xf6yh\xe4n miehen reittiopas"),i.a.createElement("img",{src:"./assets/images/poorman.png",alt:"poorman",height:"80",style:{display:"flex",alignSelf:"bottom"}})),i.a.createElement("div",{style:{color:"#777",fontSize:"0.8em",position:"relative",top:"-10px"}},"Valitse pys\xe4kit valikosta tai kartalta")),i.a.createElement(q.a,{elevation:4,style:it.content},i.a.createElement(Y,{setBusStop:m,path:n.pathWithColor,drawBusses:c,distance:n.distance,busStop:h}),i.a.createElement(G,{path:n.pathWithColor,setDrawBusses:u,setData:o,setBusStop:m,busStop:h}))))};s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ot,null)),document.getElementById("root"))},9:function(t){t.exports=JSON.parse('{"pysakit":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R"],"tiet":[{"mista":"A","mihin":"B","kesto":3},{"mista":"B","mihin":"D","kesto":2},{"mista":"D","mihin":"A","kesto":1},{"mista":"A","mihin":"C","kesto":1},{"mista":"C","mihin":"D","kesto":5},{"mista":"C","mihin":"E","kesto":2},{"mista":"E","mihin":"D","kesto":3},{"mista":"E","mihin":"F","kesto":1},{"mista":"F","mihin":"G","kesto":1},{"mista":"G","mihin":"H","kesto":2},{"mista":"H","mihin":"I","kesto":2},{"mista":"I","mihin":"J","kesto":1},{"mista":"I","mihin":"G","kesto":1},{"mista":"G","mihin":"K","kesto":8},{"mista":"K","mihin":"L","kesto":1},{"mista":"L","mihin":"M","kesto":1},{"mista":"E","mihin":"M","kesto":10},{"mista":"M","mihin":"N","kesto":2},{"mista":"N","mihin":"O","kesto":2},{"mista":"O","mihin":"P","kesto":2},{"mista":"O","mihin":"Q","kesto":1},{"mista":"P","mihin":"Q","kesto":2},{"mista":"N","mihin":"Q","kesto":1},{"mista":"Q","mihin":"R","kesto":5},{"mista":"R","mihin":"N","kesto":3},{"mista":"D","mihin":"R","kesto":6}],"linjastot":{"keltainen":["E","F","G","K","L","M","N"],"punainen":["C","D","R","Q","N","O","P"],"vihre\xe4":["D","B","A","C","E","F","G","H","I","J"],"sininen":["D","E","M","N","O"]}}')}},[[53,1,2]]]);
//# sourceMappingURL=main.ed36eccb.chunk.js.map